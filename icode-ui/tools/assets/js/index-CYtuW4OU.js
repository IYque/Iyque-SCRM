import{r as e}from"./request-DbwU2Jpl.js";import{_ as t,u as a}from"../index-B0mVr8eT.js";import{V as o,o as r,c as l,i,H as s,a as d,L as m,_ as n,$ as u,G as p}from"./_@vue_runtime-core@3.4.29@@vue-DDZ-_xUj.js";import"./_axios@1.7.2@axios-CURSphCx.js";import"./_element-plus@2.7.5@element-plus-CdApmuLJ.js";import"./_@vue_reactivity@3.4.29@@vue-Ujt3kFWg.js";import"./_@vue_shared@3.4.29@@vue-CbMJA9y8.js";import"./_lodash-es@4.17.21@lodash-es-Bg5u8xPa.js";import"./_@vueuse_shared@9.13.0@@vueuse-UyGL86A6.js";import"./_@vueuse_core@9.13.0@@vueuse-CEW8sd95.js";import"./_@vue_runtime-dom@3.4.29@@vue-DFFRdgB0.js";import"./_@element-plus_icons-vue@2.3.1@@element-plus-CcmeDuPu.js";import"./_@sxzz_popperjs-es@2.11.7@@sxzz-D3lHDW-0.js";import"./_@ctrl_tinycolor@3.6.1@@ctrl-D2oWfImC.js";import"./_dayjs@1.11.11@dayjs-t441MSVg.js";import"./_async-validator@4.2.5@async-validator-Cuo4gI4y.js";import"./_memoize-one@6.0.0@memoize-one-Ds0C_khL.js";import"./_normalize-wheel-es@1.2.0@normalize-wheel-es-Vn5vHDCm.js";import"./_@floating-ui_dom@1.6.5@@floating-ui-e4X2zpze.js";import"./_@floating-ui_core@1.6.2@@floating-ui-wf05fRq8.js";import"./_@floating-ui_utils@0.2.2@@floating-ui-Olnmr9Km.js";import"./_js-cookie@3.0.5@js-cookie-BXEMiIsG.js";/* empty css                                           */import"./_vue-router@4.3.3@vue-router-DcBx9OIa.js";import"./_path-browserify@1.0.1@path-browserify-Ce3DhMlR.js";import"./_pinia@2.1.7@pinia-Cpvd85vB.js";import"./_vue-demi@0.14.8@vue-demi-Dq6ymT-8.js";import"./_@vueuse_core@10.11.0@@vueuse-Djca5FhE.js";import"./_@vueuse_shared@10.11.0@@vueuse-C8Crp58W.js";import"./_nprogress@0.2.0@nprogress-DSZB-OSK.js";const{get:c,post:f,put:g,delt:h}=e,_="/iYqueConfig",v="/iYqueDefaultMsg",b={name:"enterprise-wechat-part1",data:()=>({corpSecretCopy:"",agentSecertEditState:!1,form:{},rules:{corpId:[{required:!0,message:"必填项",trigger:"blur"}],agentSecert:[{required:!0,message:"必填项",trigger:"blur"}],companyName:[{required:!0,message:"必填项",trigger:"blur"}],logoUrl:[{required:!0,message:"必填项",trigger:"blur"}],token:[{required:!0,message:"必填项",trigger:"blur"}],encodingAESKey:[{required:!0,message:"必填项",trigger:"blur"}]},uuid:a}),watch:{data:"setData"},props:{data:{type:Object,default:{}}},methods:{editagentSecert(){this.agentSecertEditState=!0,this.corpSecretCopy=JSON.parse(JSON.stringify(this.form.agentSecert)),this.form.agentSecert=""},cancelEditagentSecert(){this.agentSecertEditState=!1,this.form.agentSecert=JSON.parse(JSON.stringify(this.corpSecretCopy))},submit(){this.$refs.form.validate((e=>{e&&this.$emit("submit",this.form)}))},setData(){Object.keys(this.data).length&&(this.form=this.data)}},mounted(){},created(){}},j=e=>(n("data-v-7542d293"),e=e(),u(),e),y={class:"g-card"},S=j((()=>d("div",{class:"my-title"},"应用参数配置",-1))),V={class:"g-card"},k=j((()=>d("div",{class:"my-title"},"回调配置",-1)));const w={class:"g-card"};const I=t({components:{agent:t(b,[["render",function(e,t,a,n,u,p){const c=o("el-input"),f=o("el-form-item"),g=o("el-button"),h=o("el-form");return r(),l("div",null,[i(h,{ref:"form","label-position":"right",model:u.form,rules:u.rules,"label-width":"130px"},{default:s((()=>[d("div",y,[S,i(f,{label:"企业ID:",prop:"corpId"},{default:s((()=>[i(c,{modelValue:u.form.corpId,"onUpdate:modelValue":t[0]||(t[0]=e=>u.form.corpId=e),placeholder:""},null,8,["modelValue"])])),_:1}),i(f,{label:"应用ID:",prop:"agentId"},{default:s((()=>[i(c,{modelValue:u.form.agentId,"onUpdate:modelValue":t[1]||(t[1]=e=>u.form.agentId=e),placeholder:"请输入消息应用ID"},null,8,["modelValue"])])),_:1}),i(f,{label:"应用Secert:",prop:"agentSecert"},{default:s((()=>[i(c,{type:"password",modelValue:u.form.agentSecert,"onUpdate:modelValue":t[2]||(t[2]=e=>u.form.agentSecert=e),placeholder:"请输入应用Secert"},null,8,["modelValue"])])),_:1})]),d("div",V,[k,i(f,{label:"回调地址:"},{default:s((()=>[i(c,{value:u.form.token1=e.sysConfig.BASE_API+"/iycallback/handle?corpId={企业id}",readonly:"",placeholder:"{系统统一访问前缀}/iycallback/handle?corpId={企业id}"},null,8,["value"])])),_:1}),i(f,{label:"Token:",prop:"token"},{default:s((()=>[i(c,{modelValue:u.form.token,"onUpdate:modelValue":t[3]||(t[3]=e=>u.form.token=e),placeholder:"请输入Token"},null,8,["modelValue"]),i(g,{style:{"margin-left":"20px"},type:"primary",plain:"",onClick:t[4]||(t[4]=e=>u.form.token=u.uuid(28))},{default:s((()=>[m("随机获取")])),_:1})])),_:1}),i(f,{label:"AESKey:",prop:"encodingAESKey"},{default:s((()=>[i(c,{modelValue:u.form.encodingAESKey,"onUpdate:modelValue":t[5]||(t[5]=e=>u.form.encodingAESKey=e),placeholder:"请输入AESKey"},null,8,["modelValue"]),i(g,{style:{"margin-left":"20px"},type:"primary",plain:"",onClick:t[6]||(t[6]=e=>u.form.encodingAESKey=u.uuid(43))},{default:s((()=>[m(" 随机获取 ")])),_:1})])),_:1})])])),_:1},8,["model","rules"])])}],["__scopeId","data-v-7542d293"]]),welcome:t({data:()=>({loading:!1,form:{defaultContent:""},rules:{welcome:[{required:!0,message:"必填项",trigger:"blur"}]}}),created(){this.getDetail()},methods:{getDetail(){this.loading=!0,c(`${v}/findIYqueConfig`).then((({data:e})=>{this.form=e,this.loading=!1})).catch((()=>{this.loading=!1}))},submit(){this.$refs.form.validate((e=>{var t;e&&(t=this.form,f(`${v}/saveOrUpdate`,t)).then((()=>{this.msgSuccess("操作成功"),this.getDetail()}))}))}}},[["render",function(e,t,a,l,m,n){const u=o("TextareaExtend"),c=o("el-form-item"),f=o("el-form");return r(),p(f,{ref:"form","label-position":"right",model:m.form},{default:s((()=>[d("div",w,[i(c,{label:"欢迎语"},{default:s((()=>[i(u,{modelValue:m.form.defaultContent,"onUpdate:modelValue":t[0]||(t[0]=e=>m.form.defaultContent=e),toolbar:["emoji","insertCustomerNickName"],maxlength:"2000","show-word-limit":"",placeholder:"请输入",autosize:{minRows:5,maxRows:20},clearable:"",autofocus:!1},null,8,["modelValue"])])),_:1})])])),_:1},8,["model"])}]])},props:{},data:()=>({active:"agent",form:{},loading:!1}),watch:{},computed:{},created(){this.getDetail()},mounted(){},methods:{submit(e){(e=>f(`${_}/saveOrUpdate`,e))(e).then((()=>{this.msgSuccess("操作成功"),this.getDetail()}))},getDetail(){this.loading=!0,c(`${_}/findIYqueConfig`).then((({data:e})=>{this.form=e,this.loading=!1})).catch((()=>{this.loading=!1}))}}},[["render",function(e,t,a,d,n,u){const p=o("agent"),c=o("el-tab-pane"),f=o("welcome"),g=o("el-tabs"),h=o("el-button"),_=o("CommonTopRight");return r(),l("div",null,[i(g,{modelValue:n.active,"onUpdate:modelValue":t[0]||(t[0]=e=>n.active=e)},{default:s((()=>[i(c,{label:"应用参数配置",name:"agent"},{default:s((()=>[i(p,{ref:"agent",onSubmit:u.submit,data:n.form},null,8,["onSubmit","data"])])),_:1}),i(c,{label:"全局欢迎语配置",name:"welcome"},{default:s((()=>[i(f,{ref:"welcome",data:n.form},null,8,["data"])])),_:1})])),_:1},8,["modelValue"]),i(_,null,{default:s((()=>[i(h,{type:"primary",onClick:t[1]||(t[1]=t=>{var a;return null==(a=e.$refs[n.active])?void 0:a.submit()})},{default:s((()=>[m("保存配置")])),_:1})])),_:1})])}],["__scopeId","data-v-03f51786"]]);export{I as default};
