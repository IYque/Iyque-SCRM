import{a as e}from"./_axios@1.7.2@axios-CURSphCx.js";import{g as t,b as s}from"../index-B0mVr8eT.js";import{E as r,a as o,b as a}from"./_element-plus@2.7.5@element-plus-CdApmuLJ.js";const n=function(n=""){const i=e.create({baseURL:window.sysConfig.BASE_API+n,timeout:1e5});return i.interceptors.request.use((e=>(t()&&Object.assign(e.headers,window.sysConfig.headers),e)),(e=>{Promise.reject(e)})),i.interceptors.response.use((e=>{let t=s();const a=e.data.code||200;return[200,301].includes(a)?e.data:401!==a?(o.error({title:e.data.msg}),Promise.reject()):void r.confirm("登录状态已过期，请重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((()=>{t.LogOut()}))}),(e=>{let{message:t,config:s}=e;return a({message:`${t}:${s.url}`,type:"error",duration:5e3}),Promise.reject()})),i.get=(e,t,s={})=>i({url:e,params:t,...s}),i.delt=(e,t,s={})=>i.delete(e,{params:t,...s}),i}();export{n as r};
